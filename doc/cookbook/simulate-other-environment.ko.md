다른 환경 시뮬레이션
====================

[선언](../manifest.ko.md) 파일을 수정한 뒤, 그 변경이 다른 환경에서는
어떻게 동작할지 테스트가 필요한 경우,
[*dojang-env.toml* 파일](../environment.ko.md#직접-환경-지정하기)[^1]과
`--dry-run` 옵션을 함께 활용할 수 있습니다.

*dojang-env.toml* 파일은 Dojang이 실제 환경을 인식하는 대신 그 파일에 적힌
환경을 인식하도록 만드는 파일입니다.  (파일이 없으면 실제 환경을 인식합니다.)
`dojang env` 명령의 출력과 형식이 같으므로, 가지고 있는 모든 기기에서
`dojang env` 결과를 파일로 만들어 두고 쓰는 것도 좋은 방법입니다.

`--dry-run` 옵션은 `dojang` 명령이 수행하는 모든 종류의 파일시스템 변경을
완전히 샌드박스 안에서 시뮬레이션하게 합니다.
이 옵션을 쓰면 실제로 파일시스템에 변경을 가하지 않기에,
어떠한 명령을 실행하더라도 안전합니다.  따라서,
`--dry-run` 옵션을 쓰면 Dojang이 어떤 파일을 어떻게 변경할 것인지를
미리 확인할 수 있습니다.

두 기능 모두 `dojang`의 어떤 하위 명령어와 함께 쓸 수 있습니다.
단, `--dry-run` 옵션은 전역적이므로 하위 명령어 앞에 써야 합니다.
즉, 아래와 같이 쓰는 대신…

~~~~ console
$ dojang apply --force --dry-run
~~~~

아래와 같이 써야 합니다.

~~~~ console
$ dojang --dry-run apply --force
~~~~

[^1]: `-e`/`--env-file` 옵션을 사용하면 *dojang-env.toml* 파일 대신 다른 파일을 사용할 수 있습니다.
